@page "/empresas/{id:int}"
@inject IHttpClientFactory ClientFactory
@using System.Net.Http.Json

<h3>Detalhes da Empresa</h3>

@if (Empresa == null)
{
    <p>Carregando...</p>
}
else
{
    <div class="card">
        <div class="card-body">
            <h5 class="card-title">@Empresa.Nome</h5>
            <p><strong>CNPJ:</strong> @Empresa.Cnpj</p>
            <p><strong>Endereço:</strong> @Empresa.Endereco</p>
            <p><strong>Atividade Principal:</strong> @Empresa.AtividadePrincipal</p>
        </div>
    </div>
}

@code {
    [Parameter] public int id { get; set; }

    private HttpClient Http => ClientFactory.CreateClient("ApiClient");
    private EmpresaDto? Empresa;

    protected override async Task OnInitializedAsync()
    {
        Empresa = await Http.GetFromJsonAsync<EmpresaDto>($"api/empresas/{id}");
    }

    public class EmpresaDto
    {
        public string? Cnpj { get; set; }
        public string? Nome { get; set; }
        public string? Endereco { get; set; }
        public string? AtividadePrincipal { get; set; }
    }
}
